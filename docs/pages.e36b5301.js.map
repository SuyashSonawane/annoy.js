{"version":3,"sources":["../src/effects/moveAround.ts","../src/effects/index.ts","../src/index.ts","index.js"],"names":["elements","document","getElementsByClassName","a","Annoy","startAnnoying","allEffects","moveAround","f","toggle","body","style","cursor","getElementById","getElementsByTagName","filter","addEventListener"],"mappings":"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","file":"pages.e36b5301.js","sourceRoot":"..\\pages","sourcesContent":["import { Effects } from '../interfaces';\r\nimport { FunctionDataPoint } from '../types';\r\n\r\nclass MoveAround implements Effects {\r\n    private x = 0;\r\n    private y = 0;\r\n    constructor(private strength: number = 5) { }\r\n    actionDetected(data: FunctionDataPoint): void {\r\n        // console.log('action detected')\r\n    }\r\n    actionTime({ el, mouseX, mouseY, elX, elY }: FunctionDataPoint): void {\r\n        let forceX: number, forceY: number;\r\n        if (mouseX > elX) {\r\n            if (mouseY > elY) {\r\n                forceX = -this.strength\r\n                forceY = -this.strength\r\n            }\r\n            else {\r\n\r\n                forceX = -this.strength\r\n                forceY = this.strength\r\n            }\r\n        }\r\n        else {\r\n            if (mouseY > elY) {\r\n                forceX = this.strength\r\n                forceY = -this.strength\r\n            }\r\n            else {\r\n\r\n                forceX = this.strength\r\n                forceY = this.strength\r\n            }\r\n        }\r\n        forceX += this.x\r\n        forceY += this.y\r\n\r\n        this.x = forceX\r\n        this.y = forceY\r\n        el.style.transform = `translate(${forceX}px, ${forceY}px)`\r\n        el.style.top = `${forceX}px`\r\n        el.style.left = `${forceY}px`\r\n    }\r\n    dispose(data: FunctionDataPoint): void {\r\n        console.log('action disposed')\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n\r\n// moveAround: effects = (onDetect, actionTime, dispose) => { }\r\n\r\nexport default MoveAround;","import moveAround from './moveAround'\r\n\r\nexport default { moveAround }","import { DataPoint } from './types';\r\nimport allEffects from './effects'\r\nimport { Effects } from './interfaces';\r\nclass Annoy {\r\n    private effect: Effects;\r\n    private radius: number = 5;\r\n    private cursorDiv: HTMLElement;\r\n    private dataset: HTMLCollection;\r\n    private debugMode: boolean = false;\r\n    private debugAnimationSpeed: number = 2;\r\n    private itemMap: Map<HTMLElement, DataPoint> = new Map();\r\n\r\n    constructor(elements: HTMLCollection, radius: number = 5) {\r\n        // TODO add checks for elements\r\n        this.radius = radius;\r\n        this.dataset = elements\r\n        for (let i = 0; i < this.dataset.length; i++) {\r\n            const el: HTMLElement = (this.dataset[i] as HTMLElement);\r\n            const elX = el.offsetLeft + el.clientWidth / 2;\r\n            const elY = el.offsetTop + el.clientHeight / 2;\r\n            let dataPoint: DataPoint = {\r\n                el: el,\r\n                className: el.className,\r\n                id: el.id,\r\n                x: 0,\r\n                y: 0,\r\n                active: false\r\n            };\r\n\r\n            this.itemMap.set(el, dataPoint)\r\n        }\r\n    }\r\n    private generateDebugItems(animationSpeed: number) {\r\n        const style = document.createElement('style')\r\n        document.getElementsByTagName('head')[0].appendChild(style)\r\n        this.cursorDiv = document.createElement('div')\r\n        this.cursorDiv.style.border = '0.2px solid green'\r\n        this.cursorDiv.style.width = `${this.radius * 20 * 2}px`\r\n        this.cursorDiv.style.height = `${this.radius * 20 * 2}px`\r\n        this.cursorDiv.style.borderRadius = '100%'\r\n        this.cursorDiv.style.position = \"absolute\"\r\n        this.cursorDiv.id = \"cursorDiv\"\r\n        document.styleSheets[document.styleSheets.length - 1].insertRule(`\r\n            @keyframes cursorDivAnimation {\r\n            0% {\r\n                transform: scale(0.95);\r\n                box-shadow: 0 0 0 100px rgba(18, 173, 44, 0.472) inset;\r\n            }\r\n\r\n            70% {\r\n                transform: scale(1);\r\n                box-shadow: 0 0 0 0 rgba(0, 0, 0, 0) inset;\r\n            }\r\n\r\n            100% {\r\n                transform: scale(0.95);\r\n                box-shadow: 0 0 0 0 rgba(0, 0, 0, 0) inset;\r\n            }\r\n        }\r\n        `)\r\n\r\n        this.cursorDiv.style.animation = `cursorDivAnimation ease-out ${(4 - animationSpeed) * 0.75}s infinite`\r\n        document.body.append(this.cursorDiv)\r\n    }\r\n    private act = (event: MouseEvent) => {\r\n        if (this.debugMode) {\r\n            if (this.cursorDiv === undefined) {\r\n                this.generateDebugItems(this.debugAnimationSpeed)\r\n            }\r\n            this.cursorDiv.style.top = `${event.clientY - (this.radius * 20)}px`\r\n            this.cursorDiv.style.left = `${event.clientX - (this.radius * 20)}px`\r\n        }\r\n        for (let i = 0; i < this.dataset.length; i++) {\r\n            const el: HTMLElement = (this.dataset[i] as HTMLElement);\r\n            const elX = (el as HTMLElement).offsetLeft + el.clientWidth / 2;\r\n            const elY = (el as HTMLElement).offsetTop + el.clientHeight / 2;\r\n            const mouseX = event.clientX;\r\n            const mouseY = event.clientY;\r\n            const dist = Math.sqrt(Math.pow(mouseX - elX, 2) + Math.pow(mouseY - elY, 2));\r\n            if (this.debugMode)\r\n                el.style.border = \"none\"\r\n            if (dist - this.radius * 20 < 0) {\r\n                if (this.debugMode)\r\n                    el.style.border = \"2px solid black\"\r\n\r\n                if (!this.itemMap.get(el).active) {\r\n                    this.itemMap.get(el).active = true\r\n                    this.effect.actionDetected({ el, elX, elY, mouseX, mouseY })\r\n                }\r\n\r\n                this.effect.actionTime({ el, elX, elY, mouseX, mouseY })\r\n\r\n            }\r\n            else if (this.itemMap.get(el).active) {\r\n                this.itemMap.get(el).active = false\r\n                this.effect.dispose({ el, elX, elY, mouseX, mouseY })\r\n            }\r\n        }\r\n    }\r\n    startAnnoying(effect: Effects) {\r\n        this.effect = effect\r\n        document.addEventListener('mousemove', this.act, true)\r\n    }\r\n    stopIt() {\r\n        this.setDebugMode(false);\r\n        document.removeEventListener('mousemove', this.act, true)\r\n    }\r\n    setDebugMode(status: boolean, animationSpeed: number = 2) {\r\n        this.debugMode = status\r\n        this.debugAnimationSpeed = animationSpeed\r\n\r\n        if (this.debugMode === false) {\r\n            if (this.cursorDiv)\r\n                this.cursorDiv.remove()\r\n            this.cursorDiv = null\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport { Annoy, allEffects }","import { Annoy, allEffects } from '../src/index'\r\nlet elements = document.getElementsByClassName(\"fun\")\r\nlet a = new Annoy(elements, 7)\r\na.startAnnoying(new allEffects.moveAround())\r\nlet f = true;\r\nconst toggle = () => {\r\n    if (f) {\r\n        document.body.style.cursor = \"none\"\r\n        document.getElementById('action').style.cursor = \"none\"\r\n        document.getElementsByTagName('html')[0].style.filter = \"invert(1) hue-rotate(180deg)\"\r\n    }\r\n    else {\r\n\r\n        document.getElementById('action').style.cursor = \"pointer\"\r\n        document.body.style.cursor = \"default\"\r\n        document.getElementsByTagName('html')[0].style.filter = \"none\"\r\n    }\r\n\r\n    f = !f\r\n}\r\n\r\ndocument.getElementById('action').addEventListener('click', toggle)\r\n"]}