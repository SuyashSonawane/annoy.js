{"version":3,"sources":["../src/index.ts","index.js"],"names":["elements","document","getElementsByClassName","a","Annoy","startAnnoying","f","toggle","body","style","cursor","getElementById","getElementsByTagName","filter","addEventListener"],"mappings":"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","file":"pages.927314a2.js","sourceRoot":"..\\pages","sourcesContent":["import { DataPoint } from './types';\r\nimport { getRandomInRange } from './utils'\r\nclass Annoy {\r\n    private radius: number = 5;\r\n    private strength: number = 5;\r\n    private cursorDiv: HTMLElement;\r\n    private dataset: HTMLCollection;\r\n    private debugMode: boolean = false;\r\n    private debugAnimationSpeed: number = 2;\r\n    private itemMap: Map<HTMLElement, DataPoint> = new Map();\r\n\r\n    constructor(elements: HTMLCollection, radius: number = 5) {\r\n        // TODO add checks for elements\r\n        this.radius = radius;\r\n        this.dataset = elements\r\n        for (let i = 0; i < this.dataset.length; i++) {\r\n            const el: HTMLElement = (this.dataset[i] as HTMLElement);\r\n            const elX = el.offsetLeft + el.clientWidth / 2;\r\n            const elY = el.offsetTop + el.clientHeight / 2;\r\n            let dataPoint: DataPoint = {\r\n                el: el,\r\n                className: el.className,\r\n                id: el.id,\r\n                x: 0,\r\n                y: 0\r\n            };\r\n\r\n            this.itemMap.set(el, dataPoint)\r\n        }\r\n    }\r\n    private generateDebugItems(animationSpeed: number) {\r\n        const style = document.createElement('style')\r\n        document.getElementsByTagName('head')[0].appendChild(style)\r\n        this.cursorDiv = document.createElement('div')\r\n        this.cursorDiv.style.border = '0.2px solid green'\r\n        this.cursorDiv.style.width = `${this.radius * 20 * 2}px`\r\n        this.cursorDiv.style.height = `${this.radius * 20 * 2}px`\r\n        this.cursorDiv.style.borderRadius = '100%'\r\n        this.cursorDiv.style.position = \"absolute\"\r\n        this.cursorDiv.id = \"cursorDiv\"\r\n        document.styleSheets[document.styleSheets.length - 1].insertRule(`\r\n            @keyframes cursorDivAnimation {\r\n            0% {\r\n                transform: scale(0.95);\r\n                box-shadow: 0 0 0 100px rgba(18, 173, 44, 0.472) inset;\r\n            }\r\n\r\n            70% {\r\n                transform: scale(1);\r\n                box-shadow: 0 0 0 0 rgba(0, 0, 0, 0) inset;\r\n            }\r\n\r\n            100% {\r\n                transform: scale(0.95);\r\n                box-shadow: 0 0 0 0 rgba(0, 0, 0, 0) inset;\r\n            }\r\n        }\r\n        `)\r\n\r\n        this.cursorDiv.style.animation = `cursorDivAnimation ease-out ${(4 - animationSpeed) * 0.75}s infinite`\r\n        document.body.append(this.cursorDiv)\r\n    }\r\n    private act = (event: MouseEvent) => {\r\n        if (this.debugMode) {\r\n            if (this.cursorDiv === undefined) {\r\n                this.generateDebugItems(this.debugAnimationSpeed)\r\n            }\r\n            this.cursorDiv.style.top = `${event.clientY - (this.radius * 20)}px`\r\n            this.cursorDiv.style.left = `${event.clientX - (this.radius * 20)}px`\r\n        }\r\n        for (let i = 0; i < this.dataset.length; i++) {\r\n            const el: HTMLElement = (this.dataset[i] as HTMLElement);\r\n            const elX = (el as HTMLElement).offsetLeft + el.clientWidth / 2;\r\n            const elY = (el as HTMLElement).offsetTop + el.clientHeight / 2;\r\n            const mouseX = event.clientX;\r\n            const mouseY = event.clientY;\r\n            const dist = Math.sqrt(Math.pow(mouseX - elX, 2) + Math.pow(mouseY - elY, 2));\r\n            if (this.debugMode)\r\n                el.style.border = \"none\"\r\n            if (dist - this.radius * 20 < 0) {\r\n                if (this.debugMode)\r\n                    el.style.border = \"2px solid black\"\r\n\r\n                let forceX: number, forceY: number;\r\n\r\n                if (mouseX > elX) {\r\n                    if (mouseY > elY) {\r\n                        forceX = -this.strength\r\n                        forceY = -this.strength\r\n                    }\r\n                    else {\r\n\r\n                        forceX = -this.strength\r\n                        forceY = this.strength\r\n                    }\r\n                }\r\n                else {\r\n                    if (mouseY > elY) {\r\n                        forceX = this.strength\r\n                        forceY = -this.strength\r\n                    }\r\n                    else {\r\n\r\n                        forceX = this.strength\r\n                        forceY = this.strength\r\n                    }\r\n                }\r\n                forceX += this.itemMap.get(el).x\r\n                forceY += this.itemMap.get(el).y\r\n\r\n                this.itemMap.get(el).x = forceX\r\n                this.itemMap.get(el).y = forceY\r\n                el.style.transform = `translate(${forceX}px, ${forceY}px)`\r\n                // el.style.top = `${forceX}px`\r\n                // el.style.left = `${forceY}px`\r\n\r\n            }\r\n        }\r\n    }\r\n    startAnnoying() {\r\n        document.addEventListener('mousemove', this.act, true)\r\n    }\r\n    stopIt() {\r\n        document.removeEventListener('mousemove', this.act, true)\r\n    }\r\n    setDebugMode(status: boolean, animationSpeed: number = 2) {\r\n        this.debugMode = status\r\n        this.debugAnimationSpeed = animationSpeed\r\n    }\r\n\r\n}\r\n\r\nmodule.exports = Annoy","import Annoy from '../src/index'\r\nlet elements = document.getElementsByClassName(\"fun\")\r\nlet a = new Annoy(elements, 7)\r\na.startAnnoying()\r\nlet f = true;\r\nconst toggle = () => {\r\n    if (f) {\r\n        document.body.style.cursor = \"none\"\r\n        document.getElementById('action').style.cursor = \"none\"\r\n        document.getElementsByTagName('html')[0].style.filter = \"invert(1) hue-rotate(180deg)\"\r\n    }\r\n    else {\r\n\r\n        document.getElementById('action').style.cursor = \"pointer\"\r\n        document.body.style.cursor = \"default\"\r\n        document.getElementsByTagName('html')[0].style.filter = \"none\"\r\n    }\r\n\r\n    f = !f\r\n}\r\n\r\ndocument.getElementById('action').addEventListener('click', toggle)\r\n\r\n// a.setDebugMode(true, 3)\r\n// setTimeout(() => {\r\n\r\n//     a.stopIt()\r\n// }, 1000);\r\n"]}